"use strict";!function(){function e(){var e,t,r,n,s,i;this.getRootURL=function(){return e},this.getTreeSlug=function(){return t},this.getTreeStyle=function(){return r},this.getCSSPriority=function(){return i},this.getLoaderScript=function(){return n},this.getTreeContainer=function(){return s};var o,c,a,u,l=document.querySelectorAll("script[src]");o=l[l.length-1],n=o,c=this.getLoaderScript().src,null===(e=/https?:\/\/(?:(?:localhost:3000|decision-tree.test)|(?:enptree|cmetree)\.(?:staging\.)?wpengine\.com)\b/.exec(c))&&(e="https://tree.mediaengagement.org"),null===(a=this.getParameterByName("tree",this.getLoaderScript().src))||""===a?console.error('No tree specified. Add "?tree=slug-of-tree" to your URL, like this: https://tree.mediaengagement.org/dist/js/TreeLoader.min.js?tree=citizen'):t=a,u=this.getParameterByName("style",this.getLoaderScript().src),r=null===u||""===u?"base":u,function(e){i=/.+(important|clean-slate)$/.test(e)?"important":""}(this.getTreeStyle()),s=this.createTreeContainer(this.getTreeSlug(),this.getLoaderScript());var g=(new Date).getTime(),h=[{src:this.getRootURL()+"/dist/js/cme-tree-min.js?ver="+g,type:"js"},{src:this.getRootURL()+"/dist/css/"+this.getTreeStyle()+".min.css",type:"css"}];this.loadResources(h).then(this.runCreateTree.bind(this))}e.prototype={constructor:e,getParameterByName:function(e,t){e=e.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null},createTreeContainer:function(e,t){var r=document.createElement("div");return r.id="cme-tree__"+e,r.classList.add("cme-tree__loader-container"),t.parentNode.insertBefore(r,t.nextSibling),r},loadResources:function(e){for(var t=[],r=0;r<e.length;r++)t.push(this.loadResource(e[r]));return Promise.all(t)},loadResource:function(e){return new Promise((function(t,r){var n,s,i,o;switch(e.type){case"js":s="script";break;case"css":s="link"}switch((n=document.createElement(s)).onload=function(){t(e.src)},n.onerror=function(){r(e.src)},e.type){case"js":n.type="text/javascript",n.async=!0,i="src",o="body";break;case"css":n.type="text/css",n.rel="stylesheet",i="href",o="head"}n[i]=e.src,document[o].appendChild(n)}))},runCreateTree:function(){var e={slug:this.getTreeSlug(),container:this.getTreeContainer(),cssPriority:this.getCSSPriority()};window.createTree(e)}};new e}(window);