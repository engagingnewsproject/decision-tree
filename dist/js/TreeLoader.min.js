"use strict";!function(){function e(){var e=document.querySelectorAll("script[src]"),t=e[e.length-1];this.rootURL=this.getRootURL(t.src),this.treeSlug=this.getTreeSlug(t.src),this.treeStyle=this.getTreeStyle(t.src),this.createTreeContainer(this.treeSlug,t);var r=[{src:this.rootURL+"/dist/js/cme-tree.min.js",type:"js"},{src:this.rootURL+"/dist/css/"+this.treeStyle+".min.css",type:"css"}];this.loadResources(r).then(this.runCreateTree.bind(this))}e.prototype={constructor:e,getParameterByName:function(e,t){e=e.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),s=r.exec(t);return s?s[2]?decodeURIComponent(s[2].replace(/\+/g," ")):"":null},getRootURL:function(e){var t=/https?:\/\/(?:(?:localhost:3000|dev)\/decision-tree|(?:enptree)\.(?:staging\.)?wpengine\.com)\b/,r=t.exec(e);return null===r&&(r="https://tree.mediaengagement.org"),r},getTreeSlug:function(e){var t=this.getParameterByName("tree",e);return null!==t&&""!==t||console.error('No tree specified. Add "?tree=slug-of-tree" to your URL, like this: https://tree.mediaengagement.org/dist/js/TreeLoader.min.js?tree=citizen'),t},getTreeStyle:function(e){var t=this.getParameterByName("style",e);return null!==t&&""!==t||(t="base"),t},createTreeContainer:function(e,t){var r=document.createElement("div");return r.id="cme-tree__"+e,t.parentNode.insertBefore(r,t.nextSibling),r},loadResources:function(e){for(var t=[],r=0;r<e.length;r++)t.push(this.loadResource(e[r]));return Promise.all(t)},loadResource:function(e){return new Promise(function(t,r){var s,n,o,c;switch(e.type){case"js":n="script";break;case"css":n="link"}switch(s=document.createElement(n),s.onload=function(){t(e.src)},s.onerror=function(){r(e.src)},e.type){case"js":s.type="text/javascript",s.async=!0,o="src",c="body";break;case"css":s.type="text/css",s.rel="stylesheet",o="href",c="head"}s[o]=e.src,document[c].appendChild(s)})},runCreateTree:function(){var e={slug:this.treeSlug,container:document.getElementById("cme-tree__"+this.treeSlug)};window.createTree(e)}};new e}(window);