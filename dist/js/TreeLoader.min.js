"use strict";!function(){function e(){var e,t,r,n,s,i;this.getRootURL=function(){return e},this.getTreeSlug=function(){return t},this.getTreeStyle=function(){return r},this.getCSSPriority=function(){return i},this.getLoaderScript=function(){return n},this.getTreeContainer=function(){return s};var o,c,a,u,l,g=document.querySelectorAll("script[src]");o=g[g.length-1],n=o,c=this.getLoaderScript().src,null===(e=/https?:\/\/(?:(?:localhost:3000|decision-tree.dev)|(?:enptree)\.(?:staging\.)?wpengine\.com)\b/.exec(c))&&(e="https://tree.mediaengagement.org"),null===(a=this.getParameterByName("tree",this.getLoaderScript().src))||""===a?console.error('No tree specified. Add "?tree=slug-of-tree" to your URL, like this: https://tree.mediaengagement.org/dist/js/TreeLoader.min.js?tree=citizen'):t=a,u=this.getParameterByName("style",this.getLoaderScript().src),r=null===u||""===u?"base":u,l=this.getTreeStyle(),i=/.+(important|clean-slate)$/.test(l)?"important":"",s=this.createTreeContainer(this.getTreeSlug(),this.getLoaderScript());var d=[{src:this.getRootURL()+"/dist/js/cme-tree.min.js",type:"js"},{src:this.getRootURL()+"/dist/css/"+this.getTreeStyle()+".min.css",type:"css"}];this.loadResources(d).then(this.runCreateTree.bind(this))}e.prototype={constructor:e,getParameterByName:function(e,t){e=e.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null},createTreeContainer:function(e,t){var r=document.createElement("div");return r.id="cme-tree__"+e,r.classList.add("cme-tree__loader-container"),t.parentNode.insertBefore(r,t.nextSibling),r},loadResources:function(e){for(var t=[],r=0;r<e.length;r++)t.push(this.loadResource(e[r]));return Promise.all(t)},loadResource:function(o){return new Promise(function(e,t){var r,n,s,i;switch(o.type){case"js":n="script";break;case"css":n="link"}switch((r=document.createElement(n)).onload=function(){e(o.src)},r.onerror=function(){t(o.src)},o.type){case"js":r.type="text/javascript",r.async=!0,s="src",i="body";break;case"css":r.type="text/css",r.rel="stylesheet",s="href",i="head"}r[s]=o.src,document[i].appendChild(r)})},runCreateTree:function(){var e={slug:this.getTreeSlug(),container:this.getTreeContainer(),cssPriority:this.getCSSPriority()};window.createTree(e)}};new e}(window);