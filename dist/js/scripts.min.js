"use strict";function Tree(e){this.data=e,this.tree_id=e.tree_id,this.title=e.title,this.startButton=e.startButton,this.questions=e.questions,this.template=TreeTemplates.tree,this.html=this.template(this.data)}function getTreeData(e){return new Promise(function(t,r){var n=new XMLHttpRequest;n.overrideMimeType("application/json"),n.open("GET","http://dev/decision-tree/api/v1/trees/"+e+"/compiled?minfied=true",!0),n.onload=function(){200===n.status?t(n.response):r(Error("Tree could not be loaded:"+n.statusText))},n.onerror=function(){r(Error("There was a network error."))},n.send()})}function createTree(e){getTreeData(e).then(buildTree).catch(handleTreeDataError)}function buildTree(e){var t=JSON.parse(e),r=new Tree(t);Trees.push(r),renderTree(r)}function handleTreeDataError(e){console.log(e)}function renderTree(e){document.getElementById("enp-tree__"+e.tree_id).innerHTML=e.html}Handlebars.registerHelper("group_start",function(e,t,r,n){for(var i=0;i<r.length;i++)if(r[i].group_id===t)return r[i].questions[0]===e?n.fn(r[i].title):"";return""}),Handlebars.registerHelper("group_end",function(e,t,r,n){for(var i=0;i<r.length;i++)if(r[i].group_id===t){var o=r[i].questions;return o[o.length-1]===e?n.fn(this):""}return""}),Handlebars.registerHelper("group_title",function(e,t,r){for(var n=0;n<t.length;n++)if(t[n].group_id===e)return t[n].title;return""});var Trees=[];createTree("citizen");