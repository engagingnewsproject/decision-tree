"use strict";function Tree(e){var t,r,n,i,s,o;this.getTreeData=function(e){console.log(e);return new Promise(function(t,r){var n=new XMLHttpRequest;n.overrideMimeType("application/json"),n.open("GET","http://dev/decision-tree/api/v1/trees/"+e+"/compiled?minfied=true",!0),n.onload=function(){200===n.status?t(n.response):r(Error("Tree could not be loaded:"+n.statusText))},n.onerror=function(){r(Error("There was a network error."))},n.send()})},this.handleTreeDataError=function(e){console.log(e)},this.createTree=function(e){var a=JSON.parse(e);t=a.tree_id,r=a.starts,n=a.questions,i=a.ends,s="start",o=a.starts[0].start_id;var u=window.TreeTemplates.tree,c=u(a);document.getElementById("enp-tree__"+t).innerHTML=c;var l=document.getElementById("enp-tree--"+t);l.classList.remove("enp-tree--no-js"),l.classList.add("enp-tree--has-js")},this.getTreeID=function(){return t},this.getStarts=function(){return r},this.getQuestions=function(){return n},this.getEnds=function(){return i},this.getState=function(){return i},this.getTemplate=function(){},this.getHTML=function(){return _html},this.setState=function(e){s=e},this.setStateID=function(e){o=e},this.getTreeData(e).then(this.createTree).catch(this.handleTreeDataError)}Handlebars.registerHelper("environment",function(e){return"js"}),Handlebars.registerHelper("group_start",function(e,t,r,n){for(var i=0;i<r.length;i++)if(r[i].group_id===t)return r[i].questions[0]===e?n.fn(r[i].title):"";return""}),Handlebars.registerHelper("group_end",function(e,t,r,n){for(var i=0;i<r.length;i++)if(r[i].group_id===t){var s=r[i].questions;return s[s.length-1]===e?n.fn(this):""}return""}),Handlebars.registerHelper("group_title",function(e,t,r){for(var n=0;n<t.length;n++)if(t[n].group_id===e)return t[n].title;return""}),Tree.prototype.getOtherTreeID=function(){return this._treeID};var Trees=[],tree=new Tree("citizen");